(()=>{var o="mastodon-instance",n=localStorage.getItem(o),e=document.querySelector(".mastodon-share"),d=a=>{e.href=`https://${a}/share?text=${encodeURIComponent(document.title)}%0A${encodeURIComponent(location.href)}`};if(e){let a=e.dataset.prompt||"Please tell me your Mastodon instance",c=e.dataset.editlabel||"Edit your Mastodon instance",s=e.dataset.edittext||"\u270F\uFE0F",i=l=>{n=window.prompt(a,n),n&&(localStorage.setItem(o,n),r(),d(n),e.click())},r=l=>{if(document.querySelector("button.mastodon-edit"))return;let t=document.createElement("button");t.innerText=s,t.classList.add("mastodon-edit"),t.title=c,t.ariaLabel=c,t.addEventListener("click",m=>{m.preventDefault(),localStorage.removeItem(o),i()}),e.insertAdjacentElement("afterend",t)};localStorage.getItem(o)&&r(),e.addEventListener("click",l=>{localStorage.getItem(o)?d(localStorage.getItem(o)):(l.preventDefault(),i())})}})();
